webpackJsonp([3],{146:function(e,t,n){"use strict";function i(e,t){var n=0;return new window.Promise(function(i,o){var a=function(e){var a=document.querySelector(e);return a&&t&&"none"==a.style.display?++n>20&&(o(!1),!0):(i(a),!0)},s=setInterval(function(){a(e)&&clearInterval(s)},500)})}function o(e,t){e.value=t;var n=/^magnet|torrent$/.test(e.value);$("#newoffline-dialog").find("span:contains('确定')[class='text']").click(),n&&i("#offlinebtlist-dialog",!0).then(function(e){"文件名"==$(".content-title-name").html()&&$("a.checked-all")[0].click(),e.querySelectorAll(".dialog-footer>.g-button")[1].click()});!function e(){i("#offlinelist-dialog",!0).then(function(){o()}),i("#dialog1",!0).then(function(t){var n=t.find(".input-code"),i=void 0;n.focus(),i=setInterval(function(){4==n.val().length&&(clearInterval(i),$("#dialog1").find("span:contains('确定')[class='text']").click(),e())},200)})}()}t.a=function(e){document.querySelector(".g-button[data-button-id=b13]").click(),i("#_disk_id_2").then(function(e){return e.click(),i("#share-offline-link")}).then(function(t){o(t,e)})}},150:function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=this;if(e.style.opacity&&e.style.opacity>.05)e.style.opacity=e.style.opacity-.05;else if(e.style.opacity&&e.style.opacity<=.1){if(!e.parentNode)return!1;e.parentNode.children.length<=1&&(e.parentNode.style.display="none"),e.parentNode.removeChild(e),t&&t()}else e.style.opacity=.9;setTimeout(function(){return o.apply(n,[e,t])},1e3/30)}function a(e,t,n){t=t||{},n=n||"";for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];o&&"object"===(void 0===o?"undefined":m(o))&&!(o instanceof Date||o instanceof RegExp)?a(o,t,n+i+" "):t[n]&&"object"===m(t[n])?t[n][i]=o:(t[n]={},t[n][i]=o)}return t}function s(e){var t=a(e),n=JSON.stringify(t,null,2);return n=n.replace(/"([^"]*)": \{/g,"$1 {").replace(/"([^"]*)"/g,"$1").replace(/(\w*-?\w*): ([\w\d .#]*),?/g,"$1: $2;").replace(/},/g,"}\n").replace(/ &([.:])/g,"$1"),n=n.substr(1,n.lastIndexOf("}")-1)}function r(e){var t=document.head||document.getElementsByTagName("head")[0],n=c("style");n.id="mini-toastr-styles",n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div";return document.createElement(e)}function u(e,t,n){var i=c(n.icons[t].nodeType),o=n.icons[t].attrs;for(var a in o)o.hasOwnProperty(a)&&i.setAttribute(a,o[a]);e.appendChild(i)}function d(e,t,n){var i=c();i.className=n,i.appendChild(document.createTextNode(t)),e.appendChild(i)}var l,f,m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p={error:"error",warn:"warn",success:"success",info:"info"},g={container:"mini-toastr-s2a",notification:"mini-toastr__notification",title:"mini-toastr-notification__title",icon:"mini-toastr-notification__icon",message:"mini-toastr-notification__message",error:"-"+p.error,warn:"-"+p.warn,success:"-"+p.success,info:"-"+p.info},h={types:p,animation:o,timeout:3e3,icons:{},appendTarget:document.body,node:c(),style:(f={},i(f,"."+g.container,{position:"fixed","z-index":99999,right:"12px",top:"12px",display:"none"}),i(f,"."+g.notification,(l={cursor:"pointer",padding:"12px 18px",margin:"0 0 6px 0","background-color":"#000",opacity:.8,color:"#fff","border-radius":"3px","box-shadow":"#3c3b3b 0 0 12px",width:"300px"},i(l,"&."+g.error,{"background-color":"#D5122B"}),i(l,"&."+g.warn,{"background-color":"#F5AA1E"}),i(l,"&."+g.success,{"background-color":"#7AC13E"}),i(l,"&."+g.info,{"background-color":"#4196E1"}),i(l,"&:hover",{opacity:1,"box-shadow":"#000 0 0 12px"}),l)),i(f,"."+g.title,{"font-weight":"500"}),i(f,"."+g.message,{display:"inline-block","vertical-align":"middle",width:"240px",padding:"0 12px"}),f)},b={config:h,showMessage:function(e,t,n,i,o,a){var s={};Object.assign(s,this.config),Object.assign(s,a);var r=c();return r.className=g.notification+" "+g[n],r.onclick=function(){s.animation(r,null)},t&&d(r,t,g.title),s.icons[n]&&u(r,n,s),e&&d(r,e,g.message),s.node.style.display="block",s.node.insertBefore(r,s.node.firstChild),setTimeout(function(){return s.animation(r,o)},i||s.timeout),o&&o(),this},init:function(e){var t=this,n={};return Object.assign(n,h),Object.assign(n,e),this.config=n,r(s(n.style)),n.node.id=""+g.container,n.node.className=""+g.container,n.appendTarget.appendChild(n.node),Object.keys(n.types).forEach(function(e){b[n.types[e]]=function(t,i,o,a,s){return this.showMessage(t,i,n.types[e],o,a,s),this}.bind(t)}),this},setIcon:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.class=n.class?n.class+" "+g.icon:g.icon,this.config.icons[e]={nodeType:t,attrs:n}}};t.a=b},151:function(e,t,n){"use strict";t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(t,n){setTimeout(function(){n("timeout to get config")},1e4),window.extensionMessageListener||safari.self.addEventListener("message",function(e){var i=0;window.extensionMessageListener.forEach(function(n){e.name===n.name&&(n.cb&&n.cb(e.message||{}),t(e.message||{}),i++)}),i||n("no listener"),e.message&&e.message.hasCb&&safari.self.tab.dispatchMessage([e.name,"cb"].join("_"),{cookie:document.cookie})},!1),window.extensionMessageListener=[].concat(window.extensionMessageListener||[]).concat(e.listeners||[]),e.send&&e.send.forEach(function(e){safari.self.tab.dispatchMessage(e.name,e.params)})})}},157:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(150),o=n(146),a=n(36),s=n(151),r=n(37);window.top===window&&function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=g.language||navigator.language;return b[n]&&b[n][e]?[b[n][e]," "].join(""):t.notfailback?"":[e," "].join("")}function t(){var e=window.getSelection().toString();return e.match(/^https?/)||e.match(/magnet:/)?e:null}function c(e){var t=null;return"BODY"===e.tagName?t=null:"IMG"===e.tagName&&e.src?t=e.src:e.href?t=e.href:e.parentNode&&(t=c(e.parentNode)),t}function u(e,t){console.log("disableBaiduLimit:",e.disableBaiduLimit),window.mDisableBaiduLimit=e.disableBaiduLimit,document.getElementById(t).remove()}function d(t){n.i(s.a)({send:[{name:"getConfig"}],listeners:[{name:"changeRpc",cb:function(t){i.a.success(e("Success switch the default download service to")+t)}},{name:"currentRpc",cb:function(t){i.a.success(e("The current download service is")+t)}},{name:"showMassage",cb:function(e){i.a[e.action||"success"](e.text,e.title)}},{name:"baiduLixian",cb:function(e){location.href.match(/^https?:\/\/pan\.baidu\.com/)&&n.i(o.a)(e.url)}},{name:"updateConfig",cb:function(e){var t=g||{};g=e,f(),safari.self.tab.dispatchMessage("documentReady",{cookie:document.cookie}),location.href.match(/baidu/)&&g.disableBaiduLimit!==t.disableBaiduLimit&&n.i(r.a)(u,{disableBaiduLimit:g.disableBaiduLimit})}}]})}function l(e){var n=[c(e.target)||t(),document.location.href,document.cookie];safari.self.tab.setContextMenuEventUserInfo(e,n)}function f(){if(p)return void(g.catchIframe||p.disconnect());g.catchIframe&&(p=new MutationObserver(function(e){e.some(function(e){return!("IFRAME"!==e.target.tagName||"attributes"!==e.type||"src"!==e.attributeName||!n.i(a.a)(e.target.src,g,h))&&(!e.target.src.match(/^https:\/\/127\.0\.0\.1\//)&&(safari.self.tab.dispatchMessage("downloadFromIframe",{url:e.target.src,cookie:document.cookie}),e.target.src="https://127.0.0.1/",!1))})}),p.observe(document.body,{attributes:!0,attributeFilter:["src"],attributeOldValue:!0,characterData:!1,characterDataOldValue:!1,childList:!1,subtree:!0}))}function m(){h.isCommandPressed=!!h[91],h.isShiftPressd=!!h[16],h.isOptionPressd=!!h[18],safari.self.tab.dispatchMessage("keyPress",{keyPressed:h})}var p,g,h={},b={"zh-CN":{"Success switch the default download service to":"成功切换默认下载服务至","The current download service is":"当前下载服务为"}};document.onkeydown=function(e){var t=e.charCode?e.charCode:e.keyCode;h[t]=!0,m()},document.onkeyup=function(e){var t=e.charCode?e.charCode:e.keyCode;delete h[t],m()},window.onblur=function(e){h={},m()},function(){i.a.init({appendTarget:document.body,timeout:5e3}),document.addEventListener("contextmenu",l,!1),d(),m()}()}()},36:function(e,t,n){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=void 0;try{i=new URL(e)}catch(e){return!1}var o=i,a=o.pathname,s=o.protocol;if(!n[82]&&t.enableTypefiles?!n.isCommandPressed:n.isCommandPressed){if("magnet:"===s)return!0;if(n.isShiftPressd)return!0;if(!a.includes("."))return!1;var r=a.toLowerCase();return!!t.filetypes&&t.filetypes.toLowerCase().split(/\s+/).map(function(e){return"."+e}).some(function(e){return r.endsWith(e)})}return!1}t.a=i},37:function(e,t,n){"use strict";function i(){var e=(new Date).getTime()*Math.random(),t=0;e=e.toString();for(var n=0;n<e.length;n++)t=~~((t<<5)-t+e.charCodeAt(n));return Math.abs(t)}t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement("script");n.type="text/javascript",n.id=["run_js",i()].join("_"),n.innerHTML=["(",e.toString(),")(",JSON.stringify(t),',"',n.id,'")'].join(""),document.documentElement.appendChild(n)}}},[157]);